# This template includes the steps of the GCS service job in travix.yml

steps:
- bash: |
    echo Running install phase of the original travis.yml

    # Set some variables to make the system looks like Travis
    source $BUILD_SOURCESDIRECTORY/ci/azure_pipelines/templates/travis-legacy/pre-install.sh

    # Start Original script

    # install part
    . ./ci/travis/ci.sh init RAY_CI_ONLY_RLLIB_AFFECTED
    . ./ci/travis/ci.sh build

    # script part
    # Originally with ./ci/suppress_output
    bash streaming/src/test/run_streaming_queue_test.sh
    ./java/test.sh

      # End Original script

    exit 0
  env:
    PYTHONWARNINGS: 'ignore'
    TRAVIS: 'true'
    RAY_INSTALL_JAVA: 1
    TESTSUITE: gcs_service_disabled
    RAY_GCS_SERVICE_ENABLED: false
    RAY_CYTHON_EXAMPLES: 1
  displayName: 'Run original GCS service job'
  timeoutInMinutes: 120
